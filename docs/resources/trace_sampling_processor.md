---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "mezmo_trace_sampling_processor Resource - terraform-provider-mezmo"
subcategory: ""
description: |-
  The Trace Sampling Processor allows you to sample traces using either 'head' or 'tail' based methodologies.
---

# mezmo_trace_sampling_processor (Resource)

The Trace Sampling Processor allows you to sample traces using either 'head' or 'tail' based methodologies.

## Example Usage

```terraform
terraform {
  required_providers {
    mezmo = {
      source = "registry.terraform.io/mezmo/mezmo"
    }
  }
  required_version = ">= 1.1.0"
}

variable "my_ingestion_key" {
  type = string
}

provider "mezmo" {
  auth_key = "my secret"
}

resource "mezmo_pipeline" "pipeline1" {
  title = "My pipeline"
}

resource "mezmo_open_telemetry_traces_source" "source1" {
  pipeline_id = mezmo_pipeline.pipeline1.id
  title       = "My Open Telemetry Traces source"
  description = "This receives data from Open Telemetry"
}

resource "mezmo_trace_sampling_processor" "processor1" {
  pipeline_id          = mezmo_pipeline.pipeline1.id
  title                = "Tail Based Sampler"
  description          = "Sample the traces based on the tail of the trace"
  inputs               = [mezmo_open_telemetry_traces_source.source1.id]
  sample_type          = "tail"
  trace_id_field       = ".trace_id"
  parent_span_id_field = ".parent_span_id"
  conditionals = [
    {
      rate = 1,
      conditional = {
        expressions = [
          {
            field        = ".status"
            operator     = "greater_or_equal"
            value_number = "500"
          }
        ]
      }
    },
    {
      rate = 10,
      conditional = {
        expressions = [
          {
            field        = ".status"
            operator     = "greater_or_equal"
            value_number = "400"
          },
          {
            field        = ".status"
            operator     = "less"
            value_number = "500"
          }
        ]
        logical_operation = "AND"
      }
    },
    {
      rate = 100,
      conditional = {
        expressions = [
          {
            field        = ".status"
            operator     = "greater_or_equal"
            value_number = "200"
          },
          {
            field        = ".status"
            operator     = "less"
            value_number = "300"
          }
        ]
        logical_operation = "AND"
      }
    },
  ]
}

resource "mezmo_trace_sampling_processor" "processor2" {
  pipeline_id    = mezmo_pipeline.pipeline1.id
  title          = "Head Based Sampler"
  description    = "Keep 1% of traces"
  inputs         = [mezmo_open_telemetry_traces_source.source1.id]
  sample_type    = "head"
  trace_id_field = ".trace_id"
  rate           = 100
}

resource "mezmo_blackhole_destination" "destination1" {
  pipeline_id = mezmo_pipeline.pipeline1.id
  title       = "Tail based logs destination"
  ack_enabled = false
  inputs      = [mezmo_trace_sampling_processor.processor1]
}

resource "mezmo_blackhole_destination" "destination2" {
  pipeline_id = mezmo_pipeline.pipeline1.id
  title       = "Head based logs destination"
  ack_enabled = false
  inputs      = [mezmo_trace_sampling_processor.processor2]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `pipeline_id` (String) The uuid of the pipeline
- `sample_type` (String) The type of sampling to apply. Can be one of the following: 'head' or 'tail'.

### Optional

- `conditionals` (Attributes List) Tail Sampling: A list of complete conditionals, including expressions and a sample rate to maintain. (see [below for nested schema](#nestedatt--conditionals))
- `description` (String) A user-defined value describing the processor
- `inputs` (List of String) The ids of the input components
- `parent_span_id_field` (String) Tail Sampling: The field name to pull the parent span id. Absence of this field indicates the event is a root span.
- `rate` (Number) Head Sampling: The rate at which to sample traces expressed as 1/N. A value of 2 means 50% sampling, 3 means 33%, etc.
- `title` (String) A user-defined title for the processor
- `trace_id_field` (String) The field name of the trace ID to sample on.

### Read-Only

- `generation_id` (Number) An internal field used for component versioning
- `id` (String) The uuid of the processor

<a id="nestedatt--conditionals"></a>
### Nested Schema for `conditionals`

Required:

- `rate` (Number) The rate at which to sample traces expressed as 1/N. A value of 1 means 100% sampling, 2 means 50%, 3 means 33%, etc.

Optional:

- `_output_name` (String) The generated name of the rule.
- `conditional` (Attributes) Tail Sampling: A conditional expression for sampling. (see [below for nested schema](#nestedatt--conditionals--conditional))

<a id="nestedatt--conditionals--conditional"></a>
### Nested Schema for `conditionals.conditional`

Optional:

- `expressions` (Attributes List) Defines a list of expressions for field comparisons (see [below for nested schema](#nestedatt--conditionals--conditional--expressions))
- `expressions_group` (Attributes List) A group of expressions joined by a logical operator (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group))
- `logical_operation` (String) The logical operation (AND/OR) to be applied to the list of conditionals

<a id="nestedatt--conditionals--conditional--expressions"></a>
### Nested Schema for `conditionals.conditional.expressions`

Required:

- `field` (String) The field path whose value will be used in the comparison
- `operator` (String) The comparison operator. Possible values are: contains, ends_with, equal, exists, greater, greater_or_equal, is_array, is_boolean, is_empty, is_ip_in_cidr_range, is_metric, is_null, is_number, is_object, is_string, less, less_or_equal, regex_match or starts_with.

Optional:

- `negate` (Boolean) Negate the operator
- `value_number` (Number) The operand to compare the field value with, when the value is a number
- `value_string` (String) The operand to compare the field value with, when the value is a string


<a id="nestedatt--conditionals--conditional--expressions_group"></a>
### Nested Schema for `conditionals.conditional.expressions_group`

Optional:

- `expressions` (Attributes List) Defines a list of expressions for field comparisons (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions))
- `expressions_group` (Attributes List) A group of expressions joined by a logical operator (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group))
- `logical_operation` (String) The logical operation (AND/OR) to be applied to the list of conditionals

<a id="nestedatt--conditionals--conditional--expressions_group--expressions"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions`

Required:

- `field` (String) The field path whose value will be used in the comparison
- `operator` (String) The comparison operator. Possible values are: contains, ends_with, equal, exists, greater, greater_or_equal, is_array, is_boolean, is_empty, is_ip_in_cidr_range, is_metric, is_null, is_number, is_object, is_string, less, less_or_equal, regex_match or starts_with.

Optional:

- `negate` (Boolean) Negate the operator
- `value_number` (Number) The operand to compare the field value with, when the value is a number
- `value_string` (String) The operand to compare the field value with, when the value is a string


<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group`

Optional:

- `expressions` (Attributes List) Defines a list of expressions for field comparisons (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions))
- `expressions_group` (Attributes List) A group of expressions joined by a logical operator (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group))
- `logical_operation` (String) The logical operation (AND/OR) to be applied to the list of conditionals

<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions`

Required:

- `field` (String) The field path whose value will be used in the comparison
- `operator` (String) The comparison operator. Possible values are: contains, ends_with, equal, exists, greater, greater_or_equal, is_array, is_boolean, is_empty, is_ip_in_cidr_range, is_metric, is_null, is_number, is_object, is_string, less, less_or_equal, regex_match or starts_with.

Optional:

- `negate` (Boolean) Negate the operator
- `value_number` (Number) The operand to compare the field value with, when the value is a number
- `value_string` (String) The operand to compare the field value with, when the value is a string


<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group`

Optional:

- `expressions` (Attributes List) Defines a list of expressions for field comparisons (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions))
- `expressions_group` (Attributes List) A group of expressions joined by a logical operator (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group))
- `logical_operation` (String) The logical operation (AND/OR) to be applied to the list of conditionals

<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group.expressions`

Required:

- `field` (String) The field path whose value will be used in the comparison
- `operator` (String) The comparison operator. Possible values are: contains, ends_with, equal, exists, greater, greater_or_equal, is_array, is_boolean, is_empty, is_ip_in_cidr_range, is_metric, is_null, is_number, is_object, is_string, less, less_or_equal, regex_match or starts_with.

Optional:

- `negate` (Boolean) Negate the operator
- `value_number` (Number) The operand to compare the field value with, when the value is a number
- `value_string` (String) The operand to compare the field value with, when the value is a string


<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group.expressions_group`

Optional:

- `expressions` (Attributes List) Defines a list of expressions for field comparisons (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions))
- `expressions_group` (Attributes List) A group of expressions joined by a logical operator (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group))
- `logical_operation` (String) The logical operation (AND/OR) to be applied to the list of conditionals

<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group.expressions_group.expressions`

Required:

- `field` (String) The field path whose value will be used in the comparison
- `operator` (String) The comparison operator. Possible values are: contains, ends_with, equal, exists, greater, greater_or_equal, is_array, is_boolean, is_empty, is_ip_in_cidr_range, is_metric, is_null, is_number, is_object, is_string, less, less_or_equal, regex_match or starts_with.

Optional:

- `negate` (Boolean) Negate the operator
- `value_number` (Number) The operand to compare the field value with, when the value is a number
- `value_string` (String) The operand to compare the field value with, when the value is a string


<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group.expressions_group.expressions_group`

Optional:

- `expressions` (Attributes List) Defines a list of expressions for field comparisons (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions))
- `expressions_group` (Attributes List) A group of expressions joined by a logical operator (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group))
- `logical_operation` (String) The logical operation (AND/OR) to be applied to the list of conditionals

<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group.expressions_group.expressions_group.expressions`

Required:

- `field` (String) The field path whose value will be used in the comparison
- `operator` (String) The comparison operator. Possible values are: contains, ends_with, equal, exists, greater, greater_or_equal, is_array, is_boolean, is_empty, is_ip_in_cidr_range, is_metric, is_null, is_number, is_object, is_string, less, less_or_equal, regex_match or starts_with.

Optional:

- `negate` (Boolean) Negate the operator
- `value_number` (Number) The operand to compare the field value with, when the value is a number
- `value_string` (String) The operand to compare the field value with, when the value is a string


<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group.expressions_group.expressions_group.expressions_group`

Optional:

- `expressions` (Attributes List) Defines a list of expressions for field comparisons (see [below for nested schema](#nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions))
- `logical_operation` (String) The logical operation (AND/OR) to be applied to the list of conditionals

<a id="nestedatt--conditionals--conditional--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions_group--expressions"></a>
### Nested Schema for `conditionals.conditional.expressions_group.expressions_group.expressions_group.expressions_group.expressions_group.expressions_group.expressions`

Required:

- `field` (String) The field path whose value will be used in the comparison
- `operator` (String) The comparison operator. Possible values are: contains, ends_with, equal, exists, greater, greater_or_equal, is_array, is_boolean, is_empty, is_ip_in_cidr_range, is_metric, is_null, is_number, is_object, is_string, less, less_or_equal, regex_match or starts_with.

Optional:

- `negate` (Boolean) Negate the operator
- `value_number` (Number) The operand to compare the field value with, when the value is a number
- `value_string` (String) The operand to compare the field value with, when the value is a string
